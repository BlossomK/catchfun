<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">

  	  <resultMap id="memberResultSet" type="Member">
  	  		<id column="USER_NO" property="userNo"/>
  	  		<result column="user_id" property="userId"/>
  	  		<result column="user_pwd" property="userPwd"/>
  	  		<result column="USER_TYPE" property="userType"/>
  	  		<result column="user_name" property="userName"/>
  	  		<result column="email" property="email"/>
  	  		<result column="PHONE" property="phone"/>
  	  		<result column="USER_ENROLLDATE" property="enrollDate"/>
  	  		<result column="address" property="address"/>
  	  		<result column="ADDRESSNUM" property="addressNum"/>
  	  		<result column="USER_POINT" property="point"/>
  	  		<result column="STATUS" property="status"/>
  	  		<result column="REASON" property="reason"/>
  	  </resultMap>
		
  
	  <select id="loginMember" resultMap="memberResultSet" parameterType="Member">
			<!-- 암호화전 -->
			<!-- 
			select *
			  from member  
			 where user_id=#{userId}
			   and user_pwd=#{userPwd} 
			   and status='Y' -->
			<!-- 암호화 후 -->
			select *
			  from member  
			 where user_id=#{userId}
			   and status='Y'
	  </select>
	  
	  <insert id="insertMember" parameterType="Member">
	  		insert into member
	  		values('M'||SEQ_MNO.NEXTVAL, #{userId}, #{userPwd}, default, #{userName}, null, #{phone}, default, #{address}, #{addressNum}, 0, default, null, #{addressDetail}, #{addressReference})
	  </insert>
	  
	  <update id="updateMember" parameterType="Member">
	  		update member
	  		   set EMAIL=#{email}, 
	  		       PHONE=#{phone},
	  		       ADDRESS=#{address},
	  		       ADDRESSNUM=#{addressNum},
	  		       ADDRESS_DETAIL=#{addressDetail},
	  		       ADDRESS_REFERENCE=#{addressReference}
	  		 where USER_ID=#{userId}    
	  </update>
	  
	  <select id="idCheck" parameterType="string" resultType="_int">
	  		select count(*)
	  		  from member
	  		 where USER_ID=#{userId}
	  </select>
	  
	  <update id="deleteMember" parameterType="Member">
	  		update MEMBER
	  		   set REASON=#{reason}, STATUS='N'
	  		 where USER_NO=#{userNo}
	  </update>
  
</mapper>






