<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="adminMapper2">

	<resultMap id="adminMemberResultSet" type="Member1">
		<id column="USER_NO" property="userNo"/>
		<result column="USER_ID" property="userId"/>
		<result column="USER_PWD" property="userPwd"/>
		<result column="USER_TYPE" property="userType"/>
		<result column="USER_NAME" property="userName"/>
		<result column="EMAIL" property="email"/>
		<result column="PHONE" property="phone"/>
		<result column="USER_ENROLLDATE" property="userEnrolldate"/>
		<result column="ADDRESS" property="address"/>
		<result column="ADDRESSNUM" property="addressNum"/>
		<result column="USER_POINT" property="userPoint"/>
		<result column="STATUS" property="status"/>
		<result column="REASON" property="reason"/>
	</resultMap>
	
	<select id="memberListCount" resultType="_int">
		select count(*)
		  from member	
		 where status='Y'
	</select>
	
	<select id="memberList" resultMap="adminMemberResultSet">
		select *
		  from member
		 where status='Y'
		 order by user_no asc
	</select>
	
	<select id="blackListCount" resultType="_int">
		select count(*)
		  from member
		 where status='B'  
	</select>
	
	<select id="blackList" resultMap="adminMemberResultSet">
		select *
		  from member
		 where status='B'
		 order by user_no asc 
	</select>
	
	<select id="memberSearchCount" resultType="_int">
		select count(*) 
		  from member 
		 where status='Y' and USER_ID LIKE '%' || #{keyword} || '%'
	</select>
	
	<select id="memberSearch" resultMap="adminMemberResultSet">
		select *
		  from member
		 where status='Y' and USER_ID LIKE '%' || #{keyword} || '%' 
	     order by user_no asc  
	</select>
	
	<select id="blackSearchCount" resultType="_int">
		select count(*)
		  from member
		 where status='B'and USER_ID LIKE '%' || #{keyword} || '%' 
	</select>
	
	<select id="blackSearch" resultMap="adminMemberResultSet">
		select *
		  from member
		 where status='B' and USER_ID LIKE '%' || #{keyword} || '%' 
	     order by user_no asc  
    </select> 

  <!-- 
  <resultMap id="adminResultSet" type="Board">
		<id column="board_no" property="boardNo"/>
		<result column="board_title" property="boardTitle"/>
		<result column="board_writer" property="boardWriter"/>
		<result column="board_content" property="boardContent"/>
		<result column="origin_name" property="originName"/>
		<result column="change_name" property="changeName"/>
		<result column="count" property="count"/>
		<result column="create_date" property="createDate"/>
		<result column="status" property="status"/>
	</resultMap>
	
	<update id="updateMember" parameterType="Member">
	  		update member
	  		   set email=#{email}, 
	  		       age=#{age},
	  		       phone=#{phone},
	  		       address=#{address},
	  		       gender=#{gender},
	  		       modify_date=sysdate
	  		 where user_id=#{userId}    
	  </update>
	  
	  <update id="deleteMember" parameterType="string">
	  		update member
	  		   set status='N' 
	  		 where user_id=#{userId}
	  </update>
	  
	  <select id="idCheck" parameterType="string" resultType="_int">
	  		select count(*)
	  		  from member
	  		 where user_id=#{userId}
	  </select>
	   -->
	   
	   <!-- 위에 참고용 -->
	   
  	<!-- 주혁시작 -->
	   
<!-- 	<resultMap id="adminNoticeResultSet" type="Notice">
		<id column="NOTICE_NO" property="noticeNo"/>
		<result column="USER_ID" property="userId"/>
		<result column="NOTICE_TITLE" property="noticeTitle"/>
		<result column="NOTICE_CONTENT" property="noticeContent"/>
		<result column="NOTICE_DATE" property="noticeDate"/>
		<result column="NOTICE_COUNT" property="noticeCount"/>
		<result column="NOTICE_STATUS" property="noticeStatus"/>
	</resultMap>
	
	<resultMap id="adminFaqResultSet" type="Faq">
		<id column="FAQ_NO" property="faqNo"/>
		<result column="USER_NO" property="userNo"/>
		<result column="FAQ_TITLE" property="faqTitle"/>
		<result column="FAQ_ANSWER" property="faqAnswer"/>
		<result column="FAQ_STATUS" property="faqStatus"/>
		<result column="FAQ_DATE" property="faqDate"/>
	</resultMap>
	
	<select id="selectListCount" resultType="_int">
		select count(*)
		  from NOTICE_TEMP
		 where NOTICE_STATUS='N'
	</select>
	
	<select id="selectList" resultMap="adminNoticeResultSet">
		select NOTICE_NO, user_Id, NOTICE_TITLE, NOTICE_CONTENT, NOTICE_DATE, NOTICE_COUNT, NOTICE_STATUS
		  from NOTICE_TEMP
		  join member m using (user_no)
		 where NOTICE_STATUS='N'
		 order by NOTICE_DATE desc
	</select>
  	
  	<select id="noticeDetail" parameterType="string" resultMap="adminNoticeResultSet">
		select *
		  from NOTICE_TEMP
		 where NOTICE_NO=#{nno}
	</select>
	
	<insert id="insertNotice" parameterType="Notice">
		insert into NOTICE_TEMP
		values('N'||seq_nno.nextval, #{userNo}, #{noticeTitle}, #{noticeContent}, default, 0, default)
	</insert>
	
	<update id="noticeDelete" parameterType="string">
		update NOTICE_TEMP
		   set NOTICE_STATUS='Y'
		 where NOTICE_NO=#{nno}
	</update>
	
	<update id="noticeUpdatInsert" parameterType="Notice">
		update NOTICE_TEMP
		   set NOTICE_TITLE=#{noticeTitle}, NOTICE_CONTENT=#{noticeContent}
		 where NOTICE_NO=#{noticeNo}
	</update>
  	주혁끝 -->
  	
  	
  
</mapper>
