<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="adminMapper">

  <!-- 
  <resultMap id="adminResultSet" type="Board">
		<id column="board_no" property="boardNo"/>
		<result column="board_title" property="boardTitle"/>
		<result column="board_writer" property="boardWriter"/>
		<result column="board_content" property="boardContent"/>
		<result column="origin_name" property="originName"/>
		<result column="change_name" property="changeName"/>
		<result column="count" property="count"/>
		<result column="create_date" property="createDate"/>
		<result column="status" property="status"/>
	</resultMap>
	
	<update id="updateMember" parameterType="Member">
	  		update member
	  		   set email=#{email}, 
	  		       age=#{age},
	  		       phone=#{phone},
	  		       address=#{address},
	  		       gender=#{gender},
	  		       modify_date=sysdate
	  		 where user_id=#{userId}    
	  </update>
	  
	  <update id="deleteMember" parameterType="string">
	  		update member
	  		   set status='N' 
	  		 where user_id=#{userId}
	  </update>
	  
	  <select id="idCheck" parameterType="string" resultType="_int">
	  		select count(*)
	  		  from member
	  		 where user_id=#{userId}
	  </select>
	   -->
	   
	   <!-- 위에 참고용 -->
	   
  	<!-- 주혁시작 -->
	   
	<resultMap id="adminNoticeResultSet" type="Notice">
		<id column="NOTICE_NO" property="noticeNo"/>
		<result column="USER_ID" property="userId"/>
		<result column="NOTICE_TITLE" property="noticeTitle"/>
		<result column="NOTICE_CONTENT" property="noticeContent"/>
		<result column="NOTICE_DATE" property="noticeDate"/>
		<result column="NOTICE_COUNT" property="noticeCount"/>
		<result column="NOTICE_STATUS" property="noticeStatus"/>
	</resultMap>
	
	<resultMap id="adminFaqResultSet" type="Faq">
		<id column="FAQ_NO" property="faqNo"/>
		<result column="USER_NO" property="userNo"/>
		<result column="FAQ_TITLE" property="faqTitle"/>
		<result column="FAQ_ANSWER" property="faqAnswer"/>
		<result column="FAQ_STATUS" property="faqStatus"/>
		<result column="FAQ_DATE" property="faqDate"/>
	</resultMap>
	
	<resultMap id="adminQuestionResultSet" type="Question">
		<id column="A_QUESTION_NO" property="questionNo"/>
		<result column="USER_NO" property="userNo"/>
		<result column="QUESTION_TYPE" property="questionType"/>
		<result column="QUESTION_TITLE" property="questionTitle"/>
		<result column="QUESTION_CONTENT" property="questionContent"/>
		<result column="QUESTION_DATE" property="questionDate"/>
		<result column="QUESTION_YN" property="questionYn"/>
		<result column="QUESTION_STATUS" property="questionStatus"/>
		<result column="ANS_TITLE" property="ansTitle"/>
		<result column="ANS_CONTENT" property="ansContent"/>
		<result column="ANS_DATE" property="ansDate"/>
		<result column="ANS_NO" property="ansNo"/>
		<result column="COUNSELING" property="counseling"/>
	</resultMap>
	
	<select id="selectListCount" resultType="_int">
		select count(*)
		  from NOTICE_TEMP
		 where NOTICE_STATUS='N'
	</select>
	
	<select id="selectList" resultMap="adminNoticeResultSet">
		select NOTICE_NO, user_Id, NOTICE_TITLE, NOTICE_CONTENT, NOTICE_DATE, NOTICE_COUNT, NOTICE_STATUS
		  from NOTICE_TEMP
		  join member m using (user_no)
		 where NOTICE_STATUS='N'
		 order by NOTICE_DATE desc
	</select>
  	
  	<select id="noticeDetail" parameterType="string" resultMap="adminNoticeResultSet">
		select *
		  from NOTICE_TEMP
		 where NOTICE_NO=#{nno}
	</select>
	
	<insert id="insertNotice" parameterType="Notice">
		insert into NOTICE_TEMP
		values('N'||seq_nno.nextval, #{userNo}, #{noticeTitle}, #{noticeContent}, default, 0, default)
	</insert>
	
	<update id="noticeDelete" parameterType="string">
		update NOTICE_TEMP
		   set NOTICE_STATUS='Y'
		 where NOTICE_NO=#{nno}
	</update>
	
	<update id="noticeUpdatInsert" parameterType="Notice">
		update NOTICE_TEMP
		   set NOTICE_TITLE=#{noticeTitle}, NOTICE_CONTENT=#{noticeContent}
		 where NOTICE_NO=#{noticeNo}
	</update>
	
	<!-- Question -->
	<select id="questionSelectListCount" resultType="_int">
		select count(*)
		  from PERSON_QUESTION
		 where QUESTION_STATUS='N'
	</select>
	
	<select id="questionSelectList" resultMap="adminQuestionResultSet">
		select *
		  from PERSON_QUESTION
		  join member m using (user_no)
		 where QUESTION_STATUS='N'
		 order by A_QUESTION_NO desc
	</select>
	
	<select id="qnaDetail" parameterType="string" resultMap="adminQuestionResultSet">
		select *
		  from PERSON_QUESTION
		 where A_QUESTION_NO=#{qno} and QUESTION_STATUS='N'
	</select>
	
	<update id="qnaAnsUpdate" parameterType="Question">
		update PERSON_QUESTION
		   set ANS_TITLE=#{ansTitle}, ANS_CONTENT=#{ansContent}, ANS_DATE=default, QUESTION_YN='Y', ANS_NO=#{ansNo}
		 where A_QUESTION_NO=#{questionNo}
	</update>
	
	<update id="qnaDelete" parameterType="string">
		update PERSON_QUESTION
		   set QUESTION_STATUS='Y'
		 where A_QUESTION_NO=#{questionNo}
	</update>
	
	<!-- Category -->
	<!-- 
	<insert id="insertCategory" parameterType="Category">
		insert into NOTICE_TEMP
		values('N'||seq_nno.nextval, #{userNo}, #{noticeTitle}, #{noticeContent}, default, 0, default)
	</insert>
	
	 -->
  	<!-- 주혁끝 -->
  	
  	
  
</mapper>
